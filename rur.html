<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UFF no Round University Ranking (RUR) | Dashboard Completo</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Plotly JS -->
  <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --light-bg: #f8fafc;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --border-radius: 10px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--light-bg);
      color: #1f2937;
      line-height: 1.5;
      padding-top: 20px;
      padding-bottom: 40px;
    }

    .container {
      max-width: 1400px;
    }

    /* Header */
    .dashboard-header {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      margin-bottom: 30px;
      padding: 30px;
      color: white;
    }

    .dashboard-header h1 {
      font-weight: 700;
      font-size: 2.2rem;
      margin-bottom: 8px;
    }

    .dashboard-header p {
      font-size: 1rem;
      opacity: 0.9;
      max-width: 800px;
    }

    .header-badge {
      background-color: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 50px;
      padding: 8px 16px;
      font-weight: 600;
      font-size: 0.9rem;
      backdrop-filter: blur(10px);
    }

    /* Cards com cores únicas */
    .indicator-card {
      border-radius: var(--border-radius);
      border: none;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      height: 100%;
      margin-bottom: 20px;
      overflow: hidden;
      border-top: 4px solid;
    }

    .indicator-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .indicator-card .card-body {
      padding: 20px;
    }

    .card-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: #6b7280;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .indicator-value {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 5px;
      line-height: 1.1;
    }

    .card-subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 0;
    }

    .card-icon {
      font-size: 1.8rem;
      margin-bottom: 12px;
      opacity: 0.9;
    }

    /* Cores únicas para cada card */
    .card-1 {
      border-top-color: #3B82F6;
    }

    .card-1 .indicator-value {
      color: #3B82F6;
    }

    .card-1 .card-icon {
      color: #3B82F6;
    }

    .card-2 {
      border-top-color: #10B981;
    }

    .card-2 .indicator-value {
      color: #10B981;
    }

    .card-2 .card-icon {
      color: #10B981;
    }

    .card-3 {
      border-top-color: #F59E0B;
    }

    .card-3 .indicator-value {
      color: #F59E0B;
    }

    .card-3 .card-icon {
      color: #F59E0B;
    }

    .card-4 {
      border-top-color: #EF4444;
    }

    .card-4 .indicator-value {
      color: #EF4444;
    }

    .card-4 .card-icon {
      color: #EF4444;
    }

    .card-5 {
      border-top-color: #8B5CF6;
    }

    .card-5 .indicator-value {
      color: #8B5CF6;
    }

    .card-5 .card-icon {
      color: #8B5CF6;
    }

    .card-6 {
      border-top-color: #EC4899;
    }

    .card-6 .indicator-value {
      color: #EC4899;
    }

    .card-6 .card-icon {
      color: #EC4899;
    }

    .card-7 {
      border-top-color: #06D6A0;
    }

    .card-7 .indicator-value {
      color: #06D6A0;
    }

    .card-7 .card-icon {
      color: #06D6A0;
    }

    .card-8 {
      border-top-color: #118AB2;
    }

    .card-8 .indicator-value {
      color: #118AB2;
    }

    .card-8 .card-icon {
      color: #118AB2;
    }

    /* Section Headers */
    .section-header {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid;
    }

    .world-section {
      border-left-color: #1e40af;
    }

    .indicators-section {
      border-left-color: #059669;
    }

    .section-title {
      font-weight: 700;
      font-size: 1.4rem;
      margin-bottom: 0;
      display: flex;
      align-items: center;
    }

    .section-icon {
      margin-right: 10px;
      font-size: 1.5rem;
    }

    .world-icon {
      color: #1e40af;
    }

    .indicators-icon {
      color: #059669;
    }

    /* Charts */
    .chart-container {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      padding: 20px;
      margin-bottom: 25px;
      height: 100%;
    }

    .chart-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e5e7eb;
    }

    .chart-notes {
      font-size: 0.85rem;
      color: #6b7280;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #f3f4f6;
    }

    /* Tabs */
    .chart-tabs {
      background: #f9fafb;
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .tab-btn {
      flex: 1;
      min-width: 100px;
      padding: 8px 12px;
      background: transparent;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      font-size: 0.9rem;
      color: #6b7280;
      transition: var(--transition);
      text-align: center;
    }

    .tab-btn:hover {
      background: #e5e7eb;
      color: #374151;
    }

    .tab-btn.active {
      background: white;
      color: #1e40af;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    }

    .indicators-tab.active {
      color: #059669;
    }

    /* Footer */
    .footer-note {
      font-size: 0.85rem;
      color: #6b7280;
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #e5e7eb;
    }

    /* Responsive */
    @media (max-width: 992px) {
      .dashboard-header {
        padding: 25px;
      }

      .dashboard-header h1 {
        font-size: 1.8rem;
      }

      .indicator-value {
        font-size: 1.9rem;
      }
    }

    @media (max-width: 768px) {
      .dashboard-header h1 {
        font-size: 1.6rem;
      }

      .section-title {
        font-size: 1.2rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header -->
    <div class="dashboard-header">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <h1>A UFF no Round University Ranking (RUR)</h1>
        </div>
      </div>
    </div>

    <!-- Cards RUR World -->
    <div class="row mb-4">
      <div class="col-12 mb-3">
        <div class="section-header world-section">
          <h2 class="section-title">
            <i class="fas fa-globe-americas section-icon world-icon"></i>RUR World University Ranking
          </h2>
        </div>
      </div>

      <!-- Card 1: Posição no Brasil (RUR World) -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-1">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-flag"></i>
            </div>
            <h5 class="card-title">Posição no Brasil</h5>
            <div class="indicator-value">7º</div>
            <p class="card-subtitle">2025 | RUR World</p>
          </div>
        </div>
      </div>

      <!-- Card 2: Posição Mundial (RUR World) -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-2">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-globe"></i>
            </div>
            <h5 class="card-title">Posição Mundial</h5>
            <div class="indicator-value">636º</div>
            <p class="card-subtitle">2025 | RUR World</p>
          </div>
        </div>
      </div>

      <!-- Card 3: Pontuação (RUR World) -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-3">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-star"></i>
            </div>
            <h5 class="card-title">Pontuação</h5>
            <div class="indicator-value">52272</div>
            <p class="card-subtitle">2025 | RUR World</p>
          </div>
        </div>
      </div>

      <!-- Card 4: Melhor Posição Brasil (RUR World) -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-4">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-trophy"></i>
            </div>
            <h5 class="card-title">Melhor Posição Brasil</h5>
            <div class="indicator-value">5º</div>
            <p class="card-subtitle">2021-2022 | RUR World</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Gráficos RUR World -->
    <div class="row mb-5">
      <div class="col-lg-6 p-3">
        <div class="chart-container">
          <h4 class="chart-title">Posição da UFF no Brasil - RUR World</h4>
          <div id="world-brazil-chart"></div>
        </div>
      </div>

      <div class="col-lg-6 p-3">
        <div class="chart-container">
          <h4 class="chart-title">Posição Mundial da UFF - RUR World</h4>
          <div id="world-world-chart"></div>
        </div>
      </div>

      <div class="col-lg-6 p-3">
        <div class="chart-container">
          <h4 class="chart-title">Pontuação da UFF - RUR World</h4>
          <div id="world-score-chart"></div>
        </div>
      </div>

      <div class="col-lg-6 p-3">
        <div class="chart-container">
          <h4 class="chart-title">Comparação de Rankings RUR (2025)</h4>
          <div id="world-rankings-2025-chart"></div>
        </div>
      </div>
    </div>

    <!-- Cards RUR Indicators -->
    <div class="row mb-4">
      <div class="col-12 mb-3">
        <div class="section-header indicators-section">
          <h2 class="section-title">
            <i class="fas fa-chart-bar section-icon indicators-icon"></i>RUR Indicators Ranking
          </h2>
        </div>
      </div>

      <!-- Card 5: Teaching Ranking -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-5">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <h5 class="card-title">Teaching</h5>
            <div class="indicator-value">8º</div>
            <p class="card-subtitle">2025 | Brasil</p>
          </div>
        </div>
      </div>

      <!-- Card 6: Research Ranking -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-6">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-flask"></i>
            </div>
            <h5 class="card-title">Research</h5>
            <div class="indicator-value">8º</div>
            <p class="card-subtitle">2025 | Brasil</p>
          </div>
        </div>
      </div>

      <!-- Card 7: International Diversity Ranking -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-7">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-globe-americas"></i>
            </div>
            <h5 class="card-title">International Diversity</h5>
            <div class="indicator-value">4º</div>
            <p class="card-subtitle">2025 | Brasil</p>
          </div>
        </div>
      </div>

      <!-- Card 8: Financial Sustainability Ranking -->
      <div class="col-md-6 col-lg-3 mb-3">
        <div class="indicator-card card-8">
          <div class="card-body text-center">
            <div class="card-icon">
              <i class="fas fa-coins"></i>
            </div>
            <h5 class="card-title">Financial Sustainability</h5>
            <div class="indicator-value">9º</div>
            <p class="card-subtitle">2025 | Brasil</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Gráficos RUR Indicators -->
    <div class="row mb-4">
      <div class="col-12 pt-3 mb-3">
        <div class="chart-container">
          <h4 class="chart-title">Indicadores RUR</h4>
          <div class="chart-tabs mb-3">
            <button class="tab-btn indicators-tab active" onclick="changeIndicatorsTab('teaching')">Teaching</button>
            <button class="tab-btn indicators-tab" onclick="changeIndicatorsTab('research')">Research</button>
            <button class="tab-btn indicators-tab" onclick="changeIndicatorsTab('international')">International
              Diversity</button>
            <button class="tab-btn indicators-tab" onclick="changeIndicatorsTab('financial')">Financial
              Sustainability</button>
          </div>
          <div id="indicators-chart"></div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer-note">
      <p class="mb-2">
        <i class="fas fa-database me-1"></i>
        Dados extraídos do Round University Ranking (RUR) 2019-2025
      </p>
      <p class="mb-0">
        <i class="fa-solid fa-arrow-trend-up me-1"></i>
        <a href="https://www.uff.br/proplan/uff-em-numeros/" target="_blank" style="text-decoration: none;">Desenvolvido
          pela PGI/PLAN - UFF</a>
      </p>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Dados do RUR
    const years = [2019, 2021, 2022, 2023, 2024, 2025];

    // World Ranking
    const worldBrazilPosition = [6, 5, 5, 10, 9, 7];
    const worldWorldPosition = [688, 564, 517, 601, 612, 636];
    const worldScore = [32195, 44368, 54655, 52855, 52308, 52272];

    // Teaching
    const teachingBrazil = [6, 5, 8, 11, 9, 8];
    const teachingWorld = [535, 409, 396, 466, 378, 445];
    const teachingScore = [42980, 53941, 58589, 58659, 62464, 59638];

    // Research
    const researchBrazil = [8, 6, 7, 10, 9, 8];
    const researchWorld = [737, 614, 658, 724, 668, 678];
    const researchScore = [17140, 35435, 41878, 43703, 45899, 47559];

    // International Diversity
    const intdivBrazil = [6, 4, 5, 5, 5, 4];
    const intdivWorld = [745, 667, 714, 828, 728, 748];
    const intdivScore = [18810, 30906, 35731, 40599, 44475, 45076];

    // Financial Sustainability
    const financialBrazil = [4, 6, 2, 3, 10, 9];
    const financialWorld = [493, 646, 103, 371, 904, 911];
    const financialScore = [53981, 44492, 81402, 65917, 28402, 31869];

    // Dados para o gráfico de comparação 2025
    const rankings2025 = {
      names: ['World', 'Teaching', 'Research', 'International Diversity', 'Financial Sustainability'],
      brazilPositions: [7, 8, 8, 4, 9],
      worldPositions: [636, 445, 678, 748, 911],
      scores: [52272, 59638, 47559, 45076, 31869]
    };

    // Cores
    const colors = {
      blue: '#3B82F6',
      green: '#10B981',
      orange: '#F59E0B',
      red: '#EF4444',
      purple: '#8B5CF6',
      pink: '#EC4899',
      cyan: '#06D6A0',
      teal: '#118AB2',
      indigo: '#6366F1',
      yellow: '#EAB308',
      gray: '#9CA3AF',
      lightBlue: '#93C5FD',
      lightGreen: '#86EFAC'
    };

    // Configurações do gráfico
    const chartConfig = {
      responsive: true,
      displayModeBar: false,
      displaylogo: false,
      modeBarButtonsToRemove: ['lasso2d', 'select2d'],
      toImageButtonOptions: {
        format: 'png',
        filename: 'uff-rur-ranking',
        height: 500,
        width: 1000,
        scale: 1
      }
    };

    // Layout comum
    const commonLayout = {
      paper_bgcolor: 'rgba(0,0,0,0)',
      plot_bgcolor: 'rgba(0,0,0,0)',
      font: {
        family: 'Inter, sans-serif',
        color: '#1f2937'
      },
      margin: { t: 30, r: 30, b: 60, l: 60 },
      hovermode: 'closest',
      showlegend: true,
      legend: {
        orientation: 'h',
        y: -0.25,
        x: 0.5,
        xanchor: 'center',
        bgcolor: 'rgba(255, 255, 255, 0.9)',
        bordercolor: 'rgba(0,0,0,0.1)',
        borderwidth: 1
      },
      xaxis: {
        fixedrange: true,
        gridcolor: 'rgba(0,0,0,0.03)',
        showgrid: true,
        showline: true,
        linecolor: 'rgba(0,0,0,0.1)',
        linewidth: 1,
        tickmode: 'array',
        tickvals: years,
        tickformat: 'd',
        tickfont: {
          size: 10,
          color: '#6b7280'
        },
        title: {
          font: {
            size: 11,
            color: '#6b7280'
          }
        }
      },
      yaxis: {
        fixedrange: true,
        gridcolor: 'rgba(0,0,0,0.03)',
        showgrid: true,
        showline: true,
        linecolor: 'rgba(0,0,0,0.1)',
        linewidth: 1,
        tickfont: {
          size: 10,
          color: '#6b7280'
        },
        title: {
          font: {
            size: 11,
            color: '#6b7280'
          }
        }
      }
    };

    // Layout para gráficos de posição
    const positionLayout = {
      ...commonLayout,
      yaxis: {
        ...commonLayout.yaxis,
        autorange: 'reversed',
        title: 'Posição (menor = melhor)',
        tickformat: 'd',
        nticks: 6
      }
    };

    // Layout para gráficos de pontuação
    const scoreLayout = {
      ...commonLayout,
      yaxis: {
        ...commonLayout.yaxis,
        title: 'Pontuação',
        tickformat: ',d',
        separatethousands: true
      }
    };

    // Inicializar gráficos
    function initCharts() {
      // 1. Gráfico RUR World - Posição no Brasil
      const worldBrazilTrace = {
        x: years,
        y: worldBrazilPosition,
        type: 'scatter',
        mode: 'lines+markers+text',
        name: 'Posição no Brasil',
        line: {
          color: colors.blue,
          width: 4,
          shape: 'spline'
        },
        marker: {
          color: colors.blue,
          size: 10,
          line: {
            color: 'white',
            width: 2
          }
        },
        text: worldBrazilPosition.map(v => v.toString() + 'º'),
        textposition: 'top center',
        textfont: {
          size: 10,
          color: colors.blue,
          family: 'Inter, sans-serif'
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Posição no Brasil:</b> %{y}º<extra></extra>'
      };

      Plotly.newPlot('world-brazil-chart', [worldBrazilTrace], {
        ...positionLayout,
        title: ''
      }, chartConfig);

      // 2. Gráfico RUR World - Posição Mundial
      const worldWorldTrace = {
        x: years,
        y: worldWorldPosition,
        type: 'scatter',
        mode: 'lines+markers+text',
        name: 'Posição Mundial',
        line: {
          color: colors.green,
          width: 4,
          shape: 'spline'
        },
        marker: {
          color: colors.green,
          size: 10,
          line: {
            color: 'white',
            width: 2
          }
        },
        text: worldWorldPosition.map(v => v.toString() + 'º'),
        textposition: 'top center',
        textfont: {
          size: 10,
          color: colors.green,
          family: 'Inter, sans-serif'
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Posição Mundial:</b> %{y}º<extra></extra>'
      };

      Plotly.newPlot('world-world-chart', [worldWorldTrace], {
        ...positionLayout,
        title: ''
      }, chartConfig);

      // 3. Gráfico RUR World - Pontuação
      const worldScoreTrace = {
        x: years,
        y: worldScore,
        type: 'scatter',
        mode: 'lines+markers+text',
        name: 'Pontuação',
        line: {
          color: colors.orange,
          width: 4,
          shape: 'spline'
        },
        marker: {
          color: colors.orange,
          size: 10,
          line: {
            color: 'white',
            width: 2
          }
        },
        text: worldScore.map(v => v.toLocaleString('pt-BR')),
        textposition: 'top center',
        textfont: {
          size: 10,
          color: colors.orange,
          family: 'Inter, sans-serif'
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Pontuação:</b> %{y:,.0f}<extra></extra>'
      };

      Plotly.newPlot('world-score-chart', [worldScoreTrace], {
        ...scoreLayout,
        title: ''
      }, chartConfig);

      // 4. Gráfico Comparação de Rankings 2025
      const traceBrazil2025 = {
        x: rankings2025.names,
        y: rankings2025.brazilPositions,
        type: 'bar',
        name: 'Posição no Brasil',
        marker: {
          color: colors.blue,
          opacity: 0.8
        },
        text: rankings2025.brazilPositions.map(v => v.toString() + 'º'),
        textposition: 'outside',
        hovertemplate: '<b>%{x}</b><br>Posição no Brasil: %{y}º<extra></extra>'
      };

      const traceWorld2025 = {
        x: rankings2025.names,
        y: rankings2025.worldPositions,
        type: 'bar',
        name: 'Posição Mundial',
        marker: {
          color: colors.green,
          opacity: 0.8
        },
        text: rankings2025.worldPositions.map(v => v.toString() + 'º'),
        textposition: 'outside',
        hovertemplate: '<b>%{x}</b><br>Posição Mundial: %{y}º<extra></extra>'
      };

      const comparisonLayout = {
        ...commonLayout,
        title: '',
        barmode: 'group',
        yaxis: {
          ...commonLayout.yaxis,
          autorange: 'reversed',
          title: 'Posição (menor = melhor)',
          tickformat: 'd'
        },
        xaxis: {
          ...commonLayout.xaxis,
          type: 'category',
          tickangle: -15
        }
      };

      Plotly.newPlot('world-rankings-2025-chart', [traceBrazil2025, traceWorld2025], comparisonLayout, chartConfig);

      // 5. Gráfico de Indicadores (inicial com Teaching)
      createIndicatorChart('teaching');
    }

    // Função para criar gráfico de indicador
    function createIndicatorChart(indicator) {
      let brazilData, worldData, scoreData, indicatorName, color;

      switch (indicator) {
        case 'teaching':
          brazilData = teachingBrazil;
          worldData = teachingWorld;
          scoreData = teachingScore;
          indicatorName = 'Teaching';
          color = colors.purple;
          break;
        case 'research':
          brazilData = researchBrazil;
          worldData = researchWorld;
          scoreData = researchScore;
          indicatorName = 'Research';
          color = colors.pink;
          break;
        case 'international':
          brazilData = intdivBrazil;
          worldData = intdivWorld;
          scoreData = intdivScore;
          indicatorName = 'International Diversity';
          color = colors.cyan;
          break;
        case 'financial':
          brazilData = financialBrazil;
          worldData = financialWorld;
          scoreData = financialScore;
          indicatorName = 'Financial Sustainability';
          color = colors.teal;
          break;
      }

      // Traço da posição no Brasil
      const brazilTrace = {
        x: years,
        y: brazilData,
        type: 'scatter',
        mode: 'lines+markers',
        name: 'Posição no Brasil',
        line: {
          color: color,
          width: 4,
          shape: 'spline'
        },
        marker: {
          color: color,
          size: 10,
          line: {
            color: 'white',
            width: 2
          }
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Posição no Brasil:</b> %{y}º<extra></extra>',
        yaxis: 'y1'
      };

      // Traço da posição mundial
      const worldTrace = {
        x: years,
        y: worldData,
        type: 'scatter',
        mode: 'lines+markers',
        name: 'Posição Mundial',
        line: {
          color: colors.gray,
          width: 4,
          shape: 'spline',
          dash: 'dash'
        },
        marker: {
          color: colors.gray,
          size: 10,
          line: {
            color: 'white',
            width: 2
          }
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Posição Mundial:</b> %{y}º<extra></extra>',
        yaxis: 'y1'
      };

      // Traço da pontuação
      const scoreTrace = {
        x: years,
        y: scoreData,
        type: 'bar',
        name: 'Pontuação',
        marker: {
          color: colors.lightBlue,
          opacity: 0.6
        },
        hovertemplate: '<b>Ano:</b> %{x}<br><b>Pontuação:</b> %{y:,.0f}<extra></extra>',
        yaxis: 'y2'
      };

      const indicatorLayout = {
        ...commonLayout,
        title: indicatorName + ' Ranking',
        yaxis: {
          ...commonLayout.yaxis,
          autorange: 'reversed',
          title: 'Posição (menor = melhor)',
          tickformat: 'd',
          side: 'left',
          showgrid: false
        },
        yaxis2: {
          fixedrange: true,
          title: 'Pontuação',
          overlaying: 'y',
          side: 'right',
          tickformat: ',d',
          separatethousands: true,
          gridcolor: 'rgba(0,0,0,0.03)',
          showgrid: true,
          linecolor: 'rgba(0,0,0,0.1)',
          linewidth: 1,
          tickfont: {
            size: 10,
            color: colors.blue
          }
        },
        legend: {
          ...commonLayout.legend,
          y: -0.3
        },
        margin: {
          ...commonLayout.margin,
          r: 80
        }
      };

      Plotly.newPlot('indicators-chart', [brazilTrace, worldTrace, scoreTrace], indicatorLayout, chartConfig);
    }

    // Função para trocar abas dos indicadores
    function changeIndicatorsTab(tab) {
      // Atualizar botões ativos
      const tabBtns = document.querySelectorAll('.indicators-tab');
      tabBtns.forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      // Criar gráfico do indicador selecionado
      createIndicatorChart(tab);
    }

    // Inicializar
    document.addEventListener('DOMContentLoaded', function () {
      initCharts();
    });
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
